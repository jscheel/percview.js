/**
 * https://github.com/jscheel/percview.js
 *
 * @license The MIT License (MIT)
 *
 * Copyright (c) 2015 Jared A. Scheel
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(e,t,i){"use strict";function o(e,t){var i=this;this.uid=t,e=e||{},this.elements=e.elements instanceof Array?Array.prototype.slice.call(e.elements):e.elements instanceof Node?[e.elements]:Array.prototype.slice.call("string"==typeof e.elements?c.getElementsByClassName(e.elements):c.getElementsByClassName("percview"));for(var o=this.elements.length-1;o>=0;o--)this.elements[o]._percview_uid="uid_"+ ++f;return"function"==typeof e.callback&&(this.callback=e.callback),this.viewportOffset="number"==typeof e.viewportOffset?e.viewportOffset:0,this.elementOffsets={},this.positions={},this.windowHeight,this.calculateOffsets=this.calculateOffsets.bind(i),this.calculatePositions=this.calculatePositions.bind(i),setTimeout(function(){i.calculateOffsets(),i.calculatePositions()},1),this}function n(e){/**
     * @license This method is modified from the original, which is licensed under the MIT License, Copyright (c) 2010-2015 Google, Inc. http://angularjs.org
     */
var t={top:0,left:0};typeof e.getBoundingClientRect!==i&&(t=e.getBoundingClientRect());var o=s();return{top:t.top+o,bottom:t.bottom+o,height:t.height}}function s(){return(e.pageYOffset||c.scrollTop)-(c.clientTop||0)}function r(){for(var e in u)a(u[e])}function a(e){p(function(){e.calculateOffsets.apply(e),e.calculatePositions.apply(e)})}var c,l,p=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},u={},f=0,m={init:function(n){c===i&&(c=t.documentElement);var s=new o(n,"uid_"+ ++f);return 0===Object.keys(u).length&&(e.addEventListener("resize",r),e.addEventListener("scroll",r),l=setInterval(r,800)),u[s.uid]=s,s},destroy:function(t){u[t.uid]!==i&&delete u[t.uid],0===Object.keys(u).length&&(e.removeEventListener("resize",r),e.removeEventListener("scroll",r),clearInterval(l))}};o.prototype.getPercentages=function(e){return"string"==typeof e?this.positions[e]:this.positions[e._percview_uid]},o.prototype.calculateOffsets=function(){for(var t=this.elements.length-1;t>=0;t--)this.elementOffsets[this.elements[t]._percview_uid]=n(this.elements[t]);this.windowHeight=e.innerHeight},o.prototype.calculatePositions=function(){for(var e=this.elements.length-1;e>=0;e--)this.positions[this.elements[e]._percview_uid]=this.calculatePosition(this.elements[e]);this.callback&&this.callback.apply(this)},o.prototype.calculatePosition=function(e){var t=s(),o=this.windowHeight-this.viewportOffset,n={top:t+this.viewportOffset,bottom:t+o},r=this.elementOffsets[e._percview_uid],a={top:r.top-n.top+this.viewportOffset,bottom:n.bottom-r.bottom+this.viewportOffset},c=this.positions[e._percview_uid],l={percentageVisible:0,percentageTraversed:0,direction:c?c.direction:i};return r.top<n.top||r.bottom>n.bottom?r.top>n.top||r.bottom<n.bottom?r.top<n.bottom&&r.bottom>n.top?r.top>n.bottom||r.top<n.top?r.top>n.top||r.bottom<n.top?(l.percentageVisible=0,l.percentageTraversed=0):(l.percentageVisible=(r.bottom-n.top)/r.height*100,c===i||0===c.percentageVisible||"down"===c.direction?(l.direction="down",l.percentageTraversed=100-a.bottom/o*100):l.percentageTraversed=(o-a.top)/o*100):(l.percentageVisible=(n.bottom-r.top)/r.height*100,c===i||0===c.percentageVisible||"up"===c.direction?(l.direction="up",l.percentageTraversed=(o-a.top)/o*100):l.percentageTraversed=100-a.bottom/o*100):(l.percentageVisible=0,l.percentageTraversed=0):(l.percentageVisible=100,l.percentageTraversed=100):(l.percentageVisible=100,l.percentageTraversed=c&&"up"===c.direction?(o-a.top)/o*100:c&&"down"===c.direction?100-a.bottom/o*100:0),l.percentageTraversed=Math.min(100,Math.max(0,l.percentageTraversed)),l},"function"==typeof define&&define.amd?define([],function(){return m}):"undefined"!=typeof module&&module.exports?module.exports=m:e.percview=m}(window,document);